â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           AUTOSTORY BUILDER - FASE 0                                       â•‘
â•‘           Story Generator API - Estructura del Proyecto                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ 0code/
â”‚
â”œâ”€â”€ ğŸ“‹ CONFIGURACIÃ“N (10 archivos)
â”‚   â”œâ”€â”€ package.json              âš™ï¸  Dependencias y scripts NPM
â”‚   â”œâ”€â”€ tsconfig.json             âš™ï¸  TypeScript config (strict mode)
â”‚   â”œâ”€â”€ jest.config.js            ğŸ§ª Tests config (80% coverage)
â”‚   â”œâ”€â”€ .eslintrc.js              ğŸ” Linting rules
â”‚   â”œâ”€â”€ .prettierrc               âœ¨ Code formatting
â”‚   â”œâ”€â”€ .gitignore                ğŸš« Git ignore patterns
â”‚   â”œâ”€â”€ .env.example              ğŸ” Template de variables
â”‚   â”œâ”€â”€ .env                      ğŸ” Variables de entorno
â”‚   â”œâ”€â”€ README.md                 ğŸ“– DocumentaciÃ³n principal
â”‚   â””â”€â”€ IMPLEMENTATION_SUMMARY.md ğŸ“„ Resumen de implementaciÃ³n
â”‚
â”œâ”€â”€ ğŸ“‚ src/ (18 archivos TypeScript)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ”§ config/ (2 archivos)
â”‚   â”‚   â”œâ”€â”€ env.ts                    GestiÃ³n de env vars + validaciÃ³n
â”‚   â”‚   â””â”€â”€ cohere.ts                 Cliente Cohere API configurado
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‹ schemas/ (3 archivos - Zod)
â”‚   â”‚   â”œâ”€â”€ storyRequest.schema.ts    Input: tone, format, text
â”‚   â”‚   â”œâ”€â”€ storyResponse.schema.ts   Output: story + metadata
â”‚   â”‚   â””â”€â”€ error.schema.ts           Errores tipados
â”‚   â”‚
â”‚   â”œâ”€â”€ âš™ï¸  services/ (3 archivos - Business Logic)
â”‚   â”‚   â”œâ”€â”€ promptBuilder.service.ts  ConstrucciÃ³n de prompts
â”‚   â”‚   â”œâ”€â”€ outputValidator.service.ts ValidaciÃ³n 80-120 palabras
â”‚   â”‚   â””â”€â”€ storyGenerator.service.ts GeneraciÃ³n principal
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ›¡ï¸  middleware/ (2 archivos)
â”‚   â”‚   â”œâ”€â”€ validation.middleware.ts  ValidaciÃ³n con Zod
â”‚   â”‚   â””â”€â”€ errorHandler.middleware.ts Manejo global de errores
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ® controllers/ (1 archivo)
â”‚   â”‚   â””â”€â”€ story.controller.ts       Controlador de historias
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ›£ï¸  routes/ (2 archivos)
â”‚   â”‚   â”œâ”€â”€ story.routes.ts           POST /generate-story
â”‚   â”‚   â””â”€â”€ index.ts                  Router principal (/api)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ constants/ (1 archivo)
â”‚   â”‚   â””â”€â”€ prompts.ts                Templates + tone/format guidelines
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ”¨ utils/ (2 archivos)
â”‚   â”‚   â”œâ”€â”€ wordCount.ts              Contador de palabras
â”‚   â”‚   â””â”€â”€ logger.ts                 Logger (info, error, warn)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸš€ app.ts                     Express app config + CORS
â”‚   â””â”€â”€ ğŸš€ server.ts                  Entry point del servidor
â”‚
â”œâ”€â”€ ğŸ§ª tests/ (11 archivos de tests)
â”‚   â”‚
â”‚   â”œâ”€â”€ unit/ (9 archivos)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”‚   â”œâ”€â”€ storyRequest.test.ts       âœ… 17 tests
â”‚   â”‚   â”‚   â”œâ”€â”€ storyResponse.test.ts      âœ… 7 tests
â”‚   â”‚   â”‚   â””â”€â”€ error.test.ts              âœ… 4 tests
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ promptBuilder.test.ts      âœ… 7 tests
â”‚   â”‚   â”‚   â”œâ”€â”€ outputValidator.test.ts    âœ… 8 tests
â”‚   â”‚   â”‚   â””â”€â”€ storyGenerator.test.ts     âœ… 8 tests
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â””â”€â”€ wordCount.test.ts          âœ… 8 tests
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â””â”€â”€ story.test.ts              âœ… 3 tests
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ middleware/
â”‚   â”‚       â””â”€â”€ validation.test.ts         âœ… 3 tests
â”‚   â”‚
â”‚   â”œâ”€â”€ integration/ (1 archivo)
â”‚   â”‚   â””â”€â”€ story.routes.test.ts           âœ… 8 tests end-to-end
â”‚   â”‚
â”‚   â””â”€â”€ fixtures/ (1 archivo)
â”‚       â””â”€â”€ testData.ts                    Datos de prueba reutilizables
â”‚
â””â”€â”€ ğŸ’¾ prisma/ (1 archivo)
    â””â”€â”€ schema.prisma                  Schema BD para Fase 1 (preparado)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š RESUMEN ESTADÃSTICO

â”œâ”€ Total de archivos:                    40
â”œâ”€ Archivos TypeScript (src/):           18
â”œâ”€ Archivos de tests:                    11
â”œâ”€ Archivos de configuraciÃ³n:            10
â”œâ”€ Schemas Prisma:                       1
â”‚
â”œâ”€ Tests unitarios:                      ~65 casos
â”œâ”€ Tests de integraciÃ³n:                 ~8 casos
â””â”€ Cobertura objetivo:                   80%


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ FUNCIONALIDADES IMPLEMENTADAS

âœ… API REST con Express + TypeScript
âœ… ValidaciÃ³n con Zod (type-safe)
âœ… GeneraciÃ³n de historias con Cohere AI
âœ… 3 tonos: INSPIRACIONAL, EDUCATIVO, TÃ‰CNICO
âœ… 4 formatos: HISTORIA, POST, REDES_SOCIALES, OTRO
âœ… ValidaciÃ³n de entrada (20-1000 caracteres)
âœ… ValidaciÃ³n de salida (80-120 palabras ideal)
âœ… Manejo completo de errores
âœ… Tests con TDD (Test-Driven Development)
âœ… Logging de operaciones
âœ… CORS configurado para frontend
âœ… Health check endpoint


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ› ï¸  STACK TECNOLÃ“GICO

Backend Framework:      Express.js 4.18+
Lenguaje:               TypeScript 5.3+ (strict mode)
ValidaciÃ³n:             Zod 3.22+
IA:                     Cohere SDK 7.3+ (command-r-plus)
Testing:                Jest 29+ + Supertest 6+
Code Quality:           ESLint 8+ + Prettier 3+
ORM (Fase 1):           Prisma 5+ (preparado)
Base de Datos (Fase 1): PostgreSQL 15+ (preparado)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ COMANDOS PRINCIPALES

InstalaciÃ³n:
  npm install

Desarrollo:
  npm run dev              # Servidor con hot reload

Testing:
  npm test                 # Todos los tests + coverage
  npm run test:watch       # Tests en modo watch
  npm run test:unit        # Solo tests unitarios
  npm run test:integration # Solo tests de integraciÃ³n

Calidad:
  npm run lint             # Verificar cÃ³digo con ESLint
  npm run format           # Formatear con Prettier
  npm run type-check       # Verificar tipos TypeScript

ProducciÃ³n:
  npm run build            # Compilar a JavaScript
  npm start                # Ejecutar en producciÃ³n


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¡ API ENDPOINTS

POST /api/generate-story
  â†’ Genera historia con IA
  â†’ Input: { tone, format, text }
  â†’ Output: { success, generatedStory, validation, metadata }

GET /health
  â†’ Health check del servidor
  â†’ Output: { status: "ok", message: "..." }


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ EJEMPLO DE USO

curl -X POST http://localhost:8000/api/generate-story \
  -H "Content-Type: application/json" \
  -d '{
    "tone": "INSPIRACIONAL",
    "format": "REDES_SOCIALES",
    "text": "MarÃ­a completÃ³ nuestro programa y ahora tiene su propia panaderÃ­a."
  }'


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸  ANTES DE INICIAR

1. Configurar .env:
   COHERE_API_KEY="tu_api_key_aqui"

2. Instalar dependencias:
   npm install

3. Ejecutar tests:
   npm test

4. Iniciar servidor:
   npm run dev


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ESTADO: FASE 0 COMPLETADA AL 100%

Desarrollado: 9 de Diciembre, 2025
MetodologÃ­a: Test-Driven Development (TDD)
Especificaciones: Cumplidas al 100%

PrÃ³xima fase: Fase 1 - Persistencia y Multimodalidad

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
