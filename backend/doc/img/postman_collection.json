{
  "info": {
    "name": "AutoStory Builder - Phase 1",
    "description": "API collection for testing story generation with image processing",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/health",
          "host": ["{{base_url}}"],
          "path": ["health"]
        }
      },
      "response": [
        {
          "name": "Success",
          "status": "OK",
          "code": 200,
          "body": "{\"status\":\"ok\",\"timestamp\":\"2025-12-09T14:30:22.000Z\"}"
        }
      ]
    },
    {
      "name": "Generate Story - Text Only (No Image)",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "tone",
              "value": "INSPIRACIONAL",
              "type": "text"
            },
            {
              "key": "format",
              "value": "HISTORIA",
              "type": "text"
            },
            {
              "key": "text",
              "value": "juan, padre de 3 hijos, completó nuestro programa de emprendimiento. Ahora tiene su propia panadería y emplea a 2 personas de su comunidad.",
              "type": "text"
            }
          ]
        },
        "url": {
          "raw": "{{base_url}}/api/generate-story",
          "host": ["{{base_url}}"],
          "path": ["api", "generate-story"]
        }
      },
      "response": [
        {
          "name": "Success",
          "status": "OK",
          "code": 200,
          "body": "{\"success\":\"ok\",\"generatedStory\":\"Juan, un padre dedicado de tres hijos...\",\"validation\":{\"tone\":\"ok\",\"format\":\"ok\",\"text\":\"ok\",\"image\":\"not_provided\"},\"metadata\":{\"wordCount\":95,\"tone\":\"INSPIRACIONAL\",\"format\":\"HISTORIA\",\"imageProcessed\":false,\"generatedAt\":\"2025-12-10T14:30:22.000Z\",\"model\":\"command-r7b-12-2024\",\"processingTimeMs\":2847}}"
        }
      ]
    },
    {
      "name": "Generate Story - Inspirational + Social Media",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "tone",
              "value": "INSPIRACIONAL",
              "type": "text"
            },
            {
              "key": "format",
              "value": "REDES_SOCIALES",
              "type": "text"
            },
            {
              "key": "text",
              "value": "Una joven emprendedora superó todos los obstáculos para crear su empresa social",
              "type": "text"
            },
            {
              "key": "image",
              "type": "file",
              "src": "/path/to/test-image.jpg"
            }
          ]
        },
        "url": {
          "raw": "{{base_url}}/api/generate-story",
          "host": ["{{base_url}}"],
          "path": ["api", "generate-story"]
        }
      },
      "response": [
        {
          "name": "Success",
          "status": "OK",
          "code": 200,
          "body": "{\"success\":\"ok\",\"generatedStory\":\"En una comunidad rural, María transformó su pasión por la artesanía en oportunidad global...\",\"validation\":{\"tone\":\"ok\",\"format\":\"ok\",\"text\":\"ok\",\"image\":\"ok\"},\"metadata\":{\"wordCount\":95,\"tone\":\"INSPIRACIONAL\",\"format\":\"REDES_SOCIALES\",\"imageProcessed\":true,\"imageCaptions\":[\"Mujer joven emprendedora con laptop\",\"Espacio de trabajo moderno\"],\"generatedAt\":\"2025-12-09T14:30:22.000Z\",\"model\":\"command-r-plus\",\"processingTimeMs\":3847}}"
        }
      ]
    },
    {
      "name": "Generate Story - Educational + Post",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "tone",
              "value": "EDUCATIVO",
              "type": "text"
            },
            {
              "key": "format",
              "value": "POST",
              "type": "text"
            },
            {
              "key": "text",
              "value": "Aprende sobre desarrollo sostenible y su impacto en las comunidades rurales",
              "type": "text"
            },
            {
              "key": "image",
              "type": "file",
              "src": "/path/to/test-image.png"
            }
          ]
        },
        "url": {
          "raw": "{{base_url}}/api/generate-story",
          "host": ["{{base_url}}"],
          "path": ["api", "generate-story"]
        }
      }
    },
    {
      "name": "Generate Story - Technical + Historia",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "tone",
              "value": "TÉCNICO",
              "type": "text"
            },
            {
              "key": "format",
              "value": "HISTORIA",
              "type": "text"
            },
            {
              "key": "text",
              "value": "Proceso técnico de implementación de sistema de riego automatizado en comunidad agrícola",
              "type": "text"
            },
            {
              "key": "image",
              "type": "file",
              "src": "/path/to/test-image.webp"
            }
          ]
        },
        "url": {
          "raw": "{{base_url}}/api/generate-story",
          "host": ["{{base_url}}"],
          "path": ["api", "generate-story"]
        }
      }
    },
    {
      "name": "Error - Invalid Tone",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "tone",
              "value": "INVALIDO",
              "type": "text"
            },
            {
              "key": "format",
              "value": "HISTORIA",
              "type": "text"
            },
            {
              "key": "text",
              "value": "Test text for validation error",
              "type": "text"
            },
            {
              "key": "image",
              "type": "file",
              "src": "/path/to/test-image.jpg"
            }
          ]
        },
        "url": {
          "raw": "{{base_url}}/api/generate-story",
          "host": ["{{base_url}}"],
          "path": ["api", "generate-story"]
        }
      },
      "response": [
        {
          "name": "Validation Error",
          "status": "Bad Request",
          "code": 400,
          "body": "{\"success\":\"error\",\"error\":{\"code\":\"VALIDATION_ERROR\",\"message\":\"Valor de tone no válido: INVALIDO. Permitidos: INSPIRACIONAL, EDUCATIVO, TÉCNICO\",\"details\":{\"field\":\"tone\",\"received\":\"INVALIDO\"},\"timestamp\":\"2025-12-09T14:30:22.000Z\"}}"
        }
      ]
    },
    {
      "name": "Error - Text Too Short",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "tone",
              "value": "INSPIRACIONAL",
              "type": "text"
            },
            {
              "key": "format",
              "value": "HISTORIA",
              "type": "text"
            },
            {
              "key": "text",
              "value": "Short",
              "type": "text"
            },
            {
              "key": "image",
              "type": "file",
              "src": "/path/to/test-image.jpg"
            }
          ]
        },
        "url": {
          "raw": "{{base_url}}/api/generate-story",
          "host": ["{{base_url}}"],
          "path": ["api", "generate-story"]
        }
      },
      "response": [
        {
          "name": "Validation Error",
          "status": "Bad Request",
          "code": 400,
          "body": "{\"success\":\"error\",\"error\":{\"code\":\"VALIDATION_ERROR\",\"message\":\"text must be at least 20 characters\",\"timestamp\":\"2025-12-09T14:30:22.000Z\"}}"
        }
      ]
    },
    {
      "name": "Error - Missing Image",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "tone",
              "value": "EDUCATIVO",
              "type": "text"
            },
            {
              "key": "format",
              "value": "POST",
              "type": "text"
            },
            {
              "key": "text",
              "value": "Test text with sufficient length for validation",
              "type": "text"
            }
          ]
        },
        "url": {
          "raw": "{{base_url}}/api/generate-story",
          "host": ["{{base_url}}"],
          "path": ["api", "generate-story"]
        }
      },
      "response": [
        {
          "name": "Validation Error",
          "status": "Bad Request",
          "code": 400,
          "body": "{\"success\":\"error\",\"error\":{\"code\":\"VALIDATION_ERROR\",\"message\":\"Image file is required\",\"timestamp\":\"2025-12-09T14:30:22.000Z\"}}"
        }
      ]
    }
  ]
}
